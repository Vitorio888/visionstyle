const bodyEl=document.querySelector("body"),burger=document.querySelector(".js-burger"),menu=document.querySelector(".js-menu-nav"),menuLink=document.querySelectorAll(".menu-nav__link"),modal=document.querySelector(".modal");let cart={};function init(){$.getJSON("goods.json",goodsOut)}function goodsOut(e){let t=window.location.hash.substring(1);for(let n in e)if(n===t){let t=`<a href="img/${e[n].img}" class="images-popup__link images-popup__link_first" title="${e[n].name}">\n                                <picture>\n                                    <source srcset="img/${e[n].imgwebp}" type="image/webp">\n                                    <img class="images-popup__image" src="img/${e[n].img}" alt="${e[n].name}">\n                                </picture>\n                            </a>\n                            \n                            <a href="img/${e[n].img2}" class="images-popup__link images-popup__link_center" title="${e[n].name}">\n                                <picture>\n                                    <source srcset="img/${e[n].imgwebp2}" type="image/webp">\n                                    <img class="images-popup__image" src="img/${e[n].img2}" alt="${e[n].name}">\n                                </picture>\n                            </a>\n                            \n                            <a href="img/${e[n].img3}" class="images-popup__link images-popup__link_last" title="${e[n].name}">\n                                <picture>\n                                    <source srcset="img/${e[n].imgwebp3}" type="image/webp">\n                                    <img class="images-popup__image" src="img/${e[n].img3}" alt="${e[n].name}">\n                                </picture>\n                            </a>`,a=`<div class="cart">\n                            <div class="cart__container">\n                                <h3 class="cart__name">${e[n].name}</h3>\n                                \n                                <p class="cart__descr">${e[n].description}</p>\n                            </div>\n                            <div class="cart__cost">${e[n].cost} грн</div>\n                            <button class="cart__add-to-cart neon-btn" type="button" data-id="${n}">В корзину\n                                <span class="neon-btn__decorate neon-btn__decorate--one" aria-hidden="true"></span>\n                                <span class="neon-btn__decorate neon-btn__decorate--two" aria-hidden="true"></span>\n                                <span class="neon-btn__decorate neon-btn__decorate--three" aria-hidden="true"></span>\n                                <span class="neon-btn__decorate neon-btn__decorate--four" aria-hidden="true"></span>\n                            </button>\n                        </div>`;$(".images-popup").html(t),$(".goods-out").html(a),$(".cart__add-to-cart").on("click",addToCart)}}function addToCart(){let e=$(this).attr("data-id");null==cart[e]?cart[e]=1:cart[e]++,showMiniCart(),saveСart()}function saveСart(){localStorage.setItem("cart",JSON.stringify(cart))}function showMiniCart(){let e="";e+=Object.keys(cart).reduce((e,t)=>e+cart[t],0),$(".mini-cart").html(e)}function loadCart(){localStorage.getItem("cart")&&(cart=JSON.parse(localStorage.getItem("cart")),showMiniCart())}function showMenu(){bodyEl.classList.toggle("active"),menuLink.forEach(e=>e.addEventListener("click",closeMenu)),modal.addEventListener("click",closeMenu)}function closeMenu(){bodyEl.classList.remove("active")}$("document").ready((function(){$(".popup-gallery").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(e){return e.el.attr("title")}}}),init(),loadCart(),burger.addEventListener("click",showMenu)}));